---
import { getAssetUrl } from "@utils/publicPaths";
---

<nav
	class="navbar md:h-15 sticky start-0 top-0 z-1 shadow-base-300/20 shadow-sm backdrop-blur-2xl bg-transparent">
	<div class="w-full md:flex md:items-center md:gap-2">
		<div class="flex items-center justify-between">
			<div class="navbar-start items-center justify-between max-md:w-full">
				<a
					class="link text-base-content link-neutral text-2xl font-bold no-underline whitespace-nowrap"
					href={getAssetUrl("/")}>
					<span class="accent-tm-cyan">Talento</span>
					<span class="accent-tm-blue">Match</span>
				</a>
				<div class="md:hidden flex gap-2">
					<button
						type="button"
						class="collapse-toggle btn btn-outline btn-secondary btn-sm btn-square"
						data-collapse="#default-navbar-collapse"
						aria-controls="default-navbar-collapse"
						aria-label="Toggle navigation">
						<span class="icon-[tabler--menu-2] collapse-open:hidden size-4"></span>
						<span class="icon-[tabler--x] collapse-open:block hidden size-4"></span>
					</button>
					<div class="flex justify-center">
						<button
							type="button"
							class="theme-toggle btn btn-outline btn-sm btn-square"
							aria-label="Toggle theme">
							<span class="icon-sun icon-[tabler--sun] size-5"></span>
							<span class="icon-moon icon-[tabler--moon] size-5 hidden"></span>
						</button>
					</div>
				</div>
			</div>
		</div>
		<div
			id="default-navbar-collapse"
			class="md:navbar-end collapse hidden grow basis-full overflow-hidden transition-[height] duration-300 max-md:w-full">
			<ul class="menu md:menu-horizontal gap-2 p-0 text-base max-md:mt-2">
				<li><a href={getAssetUrl("/empresas")}>Soy una empresa</a></li>
				<li><a href={getAssetUrl("/candidatos")}>Soy un candidato</a></li>
				<li><a href="https://app.talento-match.com">Acceder</a></li>
				<li class="justify-center hidden md:flex">
					<button
						type="button"
						class="theme-toggle btn btn-outline btn-sm btn-square"
						aria-label="Toggle theme">
						<span class="icon-sun icon-[tabler--sun] size-5"></span>
						<span class="icon-moon icon-[tabler--moon] size-5 hidden"></span>
					</button>
				</li>
			</ul>
		</div>
	</div>
</nav>

<script>
	const themeToggles = document.querySelectorAll(".theme-toggle");
	const htmlElement = document.documentElement;

	// FunciÃ³n para actualizar todos los iconos
	function updateIcons(theme: string) {
		const iconSuns = document.querySelectorAll(".icon-sun");
		const iconMoons = document.querySelectorAll(".icon-moon");

		if (theme === "pastel") {
			iconSuns.forEach((icon) => icon.classList.add("hidden"));
			iconMoons.forEach((icon) => icon.classList.remove("hidden"));
		} else {
			iconSuns.forEach((icon) => icon.classList.remove("hidden"));
			iconMoons.forEach((icon) => icon.classList.add("hidden"));
		}
	}

	// Cargar tema guardado o usar el predeterminado
	const savedTheme = localStorage.getItem("theme") || "gourmet";
	htmlElement.setAttribute("data-theme", savedTheme);
	updateIcons(savedTheme);

	// Agregar evento a todos los botones de toggle
	themeToggles.forEach((toggle) => {
		toggle.addEventListener("click", () => {
			const currentTheme = htmlElement.getAttribute("data-theme");
			const newTheme = currentTheme === "gourmet" ? "pastel" : "gourmet";

			htmlElement.setAttribute("data-theme", newTheme);
			localStorage.setItem("theme", newTheme);
			updateIcons(newTheme);
		});
	});
</script>
